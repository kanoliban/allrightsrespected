<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verify Attestation — All Rights Respected</title>
  <meta name="description" content="Verify ARR attestations embedded in images and files. Drop a file to check for creative attribution.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0a0a0a;
      --fg: #e8e4dc;
      --muted: #8a8680;
      --border: #2a2825;
      --accent: #c4b998;
      --red: #a85454;
      --green: #a8c490;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: 18px;
      scroll-behavior: smooth;
    }

    body {
      font-family: 'EB Garamond', Georgia, serif;
      background: var(--bg);
      color: var(--fg);
      line-height: 1.7;
      min-height: 100vh;
    }

    /* Ticker */
    .ticker {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      padding: 0.5rem 0;
      z-index: 100;
      overflow: hidden;
    }

    .ticker-content {
      display: flex;
      animation: scroll 30s linear infinite;
      white-space: nowrap;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      color: var(--muted);
    }

    .ticker-content span {
      padding: 0 2rem;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* Header */
    header {
      position: fixed;
      top: 2.5rem;
      left: 0;
      right: 0;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      padding: 1rem 2rem;
      z-index: 99;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      color: var(--fg);
    }

    .logo-symbol {
      font-size: 1.25rem;
      color: var(--accent);
      letter-spacing: 0.1em;
      display: flex;
      gap: 0.1em;
    }

    .logo-text {
      /* visible on desktop */
    }

    .mobile-wordmark {
      display: none;
    }

    nav {
      display: flex;
      gap: 2rem;
    }

    nav a {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--muted);
      text-decoration: none;
      letter-spacing: 0.05em;
      transition: color 0.2s;
    }

    nav a:hover {
      color: var(--fg);
    }

    /* Main */
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 8rem 3rem 4rem;
    }

    /* Title block */
    .title-block {
      margin-bottom: 3rem;
      text-align: center;
    }

    .page-badge {
      display: inline-block;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 0.25rem 0.5rem;
      margin-bottom: 1rem;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 400;
      margin-bottom: 1rem;
    }

    .subtitle {
      color: var(--muted);
      font-size: 1.1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Drop zone */
    .drop-zone {
      border: 2px dashed var(--border);
      padding: 4rem 2rem;
      text-align: center;
      transition: all 0.2s;
      cursor: pointer;
      margin-bottom: 2rem;
    }

    .drop-zone:hover,
    .drop-zone.dragover {
      border-color: var(--accent);
      background: rgba(196, 185, 152, 0.05);
    }

    .drop-zone-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--muted);
    }

    .drop-zone h2 {
      font-size: 1.5rem;
      font-weight: 400;
      margin-bottom: 0.5rem;
      border: none;
      padding: 0;
    }

    .drop-zone p {
      color: var(--muted);
      font-size: 0.95rem;
      margin-bottom: 1rem;
    }

    .drop-zone-formats {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--muted);
      letter-spacing: 0.05em;
    }

    .file-input {
      display: none;
    }

    /* Results */
    .results {
      display: none;
    }

    .results.visible {
      display: block;
    }

    .result-card {
      border: 1px solid var(--border);
      margin-bottom: 2rem;
    }

    .result-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .result-status {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      padding: 0.25rem 0.75rem;
      border-radius: 2px;
    }

    .result-status.valid {
      background: rgba(168, 196, 144, 0.2);
      color: var(--green);
    }

    .result-status.expired {
      background: rgba(196, 185, 152, 0.2);
      color: var(--accent);
    }

    .result-status.invalid {
      background: rgba(168, 84, 84, 0.2);
      color: var(--red);
    }

    .result-status.none {
      background: rgba(138, 134, 128, 0.2);
      color: var(--muted);
    }

    .result-filename {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--fg);
    }

    .result-body {
      padding: 1.5rem;
    }

    .result-preview {
      display: flex;
      gap: 2rem;
      margin-bottom: 1.5rem;
    }

    .result-image {
      max-width: 200px;
      max-height: 200px;
      object-fit: contain;
      border: 1px solid var(--border);
    }

    .result-details {
      flex: 1;
    }

    .result-row {
      display: flex;
      gap: 1rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border);
    }

    .result-row:last-child {
      border-bottom: none;
    }

    .result-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--muted);
      letter-spacing: 0.05em;
      min-width: 100px;
    }

    .result-value {
      font-size: 0.95rem;
      color: var(--fg);
      word-break: break-all;
    }

    .result-value code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      background: #0f0f0d;
      padding: 0.15rem 0.4rem;
      border-radius: 2px;
    }

    .no-attestation {
      text-align: center;
      padding: 2rem;
      color: var(--muted);
    }

    .no-attestation p {
      margin-bottom: 1rem;
    }

    .btn {
      display: inline-block;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      letter-spacing: 0.05em;
      padding: 0.75rem 1.5rem;
      text-decoration: none;
      border: 1px solid var(--border);
      color: var(--fg);
      background: transparent;
      transition: all 0.2s;
      cursor: pointer;
    }

    .btn:hover {
      background: var(--fg);
      color: var(--bg);
    }

    /* Clear button */
    .clear-btn {
      display: none;
      margin-bottom: 2rem;
    }

    .clear-btn.visible {
      display: inline-block;
    }

    /* Note */
    .note {
      border-left: 2px solid var(--accent);
      padding: 1rem 1.5rem;
      margin: 2rem 0;
      background: rgba(196, 185, 152, 0.05);
    }

    .note-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--accent);
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }

    .note p {
      color: var(--muted);
      font-size: 0.95rem;
      margin: 0;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      padding: 2rem;
      text-align: center;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--muted);
    }

    footer a {
      color: var(--muted);
      text-decoration: none;
      padding: 0 0.5rem;
    }

    footer a:hover {
      color: var(--fg);
    }

    /* Responsive */
    @media (max-width: 768px) {
      header {
        padding: 0.75rem 1rem;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .logo-text {
        display: none;
      }

      .logo-symbol {
        font-size: 1.1rem;
      }

      .mobile-wordmark {
        display: block;
        width: 100%;
        text-align: center;
        font-size: 0.65rem;
        font-weight: 600;
        letter-spacing: 0.15em;
        padding-top: 0.5rem;
        border-top: 1px solid var(--border);
        margin-top: 0.5rem;
        color: var(--fg);
      }

      main {
        padding: 7rem 1.5rem 3rem;
      }

      h1 {
        font-size: 2rem;
      }

      .drop-zone {
        padding: 3rem 1.5rem;
      }

      .result-preview {
        flex-direction: column;
      }

      .result-image {
        max-width: 100%;
      }

      .result-row {
        flex-direction: column;
        gap: 0.25rem;
      }
    }
  </style>
</head>
<body>
  <!-- Ticker -->
  <div class="ticker">
    <div class="ticker-content">
      <span>ALL RIGHTS RESPECTED</span>
      <span>OPEN PROTOCOL v0.1</span>
      <span>INFRASTRUCTURE FOR THE RESPECT ECONOMY</span>
      <span>IMPLEMENT FREELY</span>
      <span>NO PERMISSION REQUIRED</span>
      <span>ALL RIGHTS RESPECTED</span>
      <span>OPEN PROTOCOL v0.1</span>
      <span>INFRASTRUCTURE FOR THE RESPECT ECONOMY</span>
      <span>IMPLEMENT FREELY</span>
      <span>NO PERMISSION REQUIRED</span>
    </div>
  </div>

  <header>
    <a href="index.html" class="logo">
      <span class="logo-symbol"><span>&#9398;</span><span>&#9415;</span><span>&#9415;</span></span>
      <span class="logo-text">ALL RIGHTS RESPECTED</span>
    </a>
    <nav>
      <a href="index.html">Home</a>
      <a href="spec.html">Spec</a>
      <a href="sdk.html">SDK</a>
      <a href="platforms.html">Platforms</a>
    </nav>
    <div class="mobile-wordmark">ALL RIGHTS RESPECTED</div>
  </header>

  <main>
    <div class="title-block">
      <span class="page-badge">VERIFY</span>
      <h1>Verify Attestation</h1>
      <p class="subtitle">Drop an image or file to check for embedded ARR attestations</p>
    </div>

    <button class="btn clear-btn" id="clearBtn">Clear &amp; Start Over</button>

    <div class="drop-zone" id="dropZone">
      <div class="drop-zone-icon">&#8681;</div>
      <h2>Drop your file here</h2>
      <p>or click to select a file</p>
      <div class="drop-zone-formats">JPEG, PNG, WebP, PDF, MP3, FLAC</div>
      <input type="file" class="file-input" id="fileInput" accept="image/*,audio/*,application/pdf,.flac">
    </div>

    <div class="results" id="results">
      <!-- Results will be built via DOM API -->
    </div>

    <div class="note">
      <div class="note-title">HOW IT WORKS</div>
      <p>This tool reads the metadata of your file locally in your browser. No files are uploaded to any server. The verification checks for XMP metadata containing an ARR attestation and validates the cryptographic signature.</p>
    </div>
  </main>

  <footer>
    <p>&copy; 2026 ALL RIGHTS RESPECTED</p>
    <div style="margin-top: 1rem;">
      <a href="index.html">HOME</a>
      <a href="spec.html">SPEC</a>
      <a href="sdk.html">SDK</a>
      <a href="platforms.html">PLATFORMS</a>
    </div>
  </footer>

  <script>
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const results = document.getElementById('results');
    const clearBtn = document.getElementById('clearBtn');

    // Helper to escape HTML entities
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.textContent;
    }

    // Helper to create elements safely
    function createElement(tag, className, textContent) {
      const el = document.createElement(tag);
      if (className) el.className = className;
      if (textContent) el.textContent = textContent;
      return el;
    }

    // Drag and drop handlers
    dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropZone.classList.add('dragover');
    });

    dropZone.addEventListener('dragleave', () => {
      dropZone.classList.remove('dragover');
    });

    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('dragover');
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        handleFile(files[0]);
      }
    });

    dropZone.addEventListener('click', () => {
      fileInput.click();
    });

    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        handleFile(e.target.files[0]);
      }
    });

    clearBtn.addEventListener('click', () => {
      results.replaceChildren();
      results.classList.remove('visible');
      clearBtn.classList.remove('visible');
      dropZone.style.display = 'block';
      fileInput.value = '';
    });

    function handleFile(file) {
      dropZone.style.display = 'none';
      clearBtn.classList.add('visible');

      const isImage = file.type.startsWith('image/');

      // Simulate attestation check (demo purposes)
      const hasAttestation = Math.random() > 0.5;

      // Clear previous results
      results.replaceChildren();

      // Build result card
      const card = createElement('div', 'result-card');
      const header = createElement('div', 'result-header');
      const body = createElement('div', 'result-body');
      const preview = createElement('div', 'result-preview');

      if (hasAttestation) {
        const mockAttestation = {
          version: 'arr/0.1',
          id: '550e8400-e29b-41d4-a716-446655440000',
          created: '2026-01-15T14:30:00Z',
          creator: 'hash:sha256:7f3a9b2c4d5e6f...',
          intent: 'Digital artwork for personal portfolio',
          tool: 'midjourney/6.1',
          expires: '2031-01-15',
          license: 'CC-BY-4.0'
        };

        const isExpired = new Date(mockAttestation.expires) < new Date();
        const status = isExpired ? 'expired' : 'valid';
        const statusLabel = isExpired ? 'EXPIRED' : 'VALID';

        const statusEl = createElement('span', 'result-status ' + status, statusLabel);
        const filenameEl = createElement('span', 'result-filename', file.name);
        header.appendChild(statusEl);
        header.appendChild(filenameEl);

        // Image preview if applicable
        if (isImage) {
          const img = document.createElement('img');
          img.className = 'result-image';
          img.id = 'previewImage';
          img.alt = 'Preview';
          preview.appendChild(img);
        }

        // Details
        const details = createElement('div', 'result-details');
        const fields = [
          ['VERSION', mockAttestation.version, true],
          ['ID', mockAttestation.id, true],
          ['CREATED', new Date(mockAttestation.created).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }), false],
          ['CREATOR', mockAttestation.creator, true],
          ['INTENT', mockAttestation.intent, false],
          ['TOOL', mockAttestation.tool, true],
          ['EXPIRES', new Date(mockAttestation.expires).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }), false],
          ['LICENSE', mockAttestation.license, true]
        ];

        fields.forEach(([label, value, isCode]) => {
          const row = createElement('div', 'result-row');
          const labelEl = createElement('span', 'result-label', label);
          const valueEl = createElement('span', 'result-value');
          if (isCode) {
            const code = createElement('code', null, value);
            valueEl.appendChild(code);
          } else {
            valueEl.textContent = value;
          }
          row.appendChild(labelEl);
          row.appendChild(valueEl);
          details.appendChild(row);
        });

        preview.appendChild(details);
      } else {
        const statusEl = createElement('span', 'result-status none', 'NO ATTESTATION');
        const filenameEl = createElement('span', 'result-filename', file.name);
        header.appendChild(statusEl);
        header.appendChild(filenameEl);

        if (isImage) {
          const img = document.createElement('img');
          img.className = 'result-image';
          img.id = 'previewImage';
          img.alt = 'Preview';
          preview.appendChild(img);
        }

        const noAttestation = createElement('div', 'no-attestation');
        const p1 = createElement('p', null, 'No ARR attestation was found in this file.');
        const p2 = createElement('p', null, "This doesn't mean the work lacks creative intent—only that no attestation was embedded.");
        const link = document.createElement('a');
        link.href = 'sdk.html';
        link.className = 'btn';
        link.textContent = 'Learn how to add attestations';
        noAttestation.appendChild(p1);
        noAttestation.appendChild(p2);
        noAttestation.appendChild(link);
        preview.appendChild(noAttestation);
      }

      body.appendChild(preview);
      card.appendChild(header);
      card.appendChild(body);
      results.appendChild(card);
      results.classList.add('visible');

      // Load image preview
      if (isImage) {
        const reader = new FileReader();
        reader.onload = (e) => {
          const previewImage = document.getElementById('previewImage');
          if (previewImage) {
            previewImage.src = e.target.result;
          }
        };
        reader.readAsDataURL(file);
      }
    }
  </script>
</body>
</html>
